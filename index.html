<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prajavani Prototype - Aligned Overlay Header with Featured Bar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    /* --- Custom Font Faces --- */
    /* PV Headline: Used for navigation, buttons, headlines, and important UI elements */
    @font-face {
        font-family: 'PV Headline';
        src: url('PvHeadlineSemiBold.ttf') format('truetype');
        font-weight: 600;
        font-style: normal;
        font-display: swap;
    }
    
    /* PV Text: Used for body text, content, and secondary UI elements */
    @font-face {
        font-family: 'PV Text';
        src: url('PvTextRegular.ttf') format('truetype');
        font-weight: 400;
        font-style: normal;
        font-display: swap;
    }
    
    /* --- Kannada Font Size Adjustments --- */
    /* Increase font sizes for better Kannada readability */
    .kannada-text {
        font-size: 1.1em; /* 10% increase for better Kannada readability */
    }
    
    .kannada-text.small-text {
        font-size: 1.05em; /* 5% increase for small Kannada text - keeps hierarchy */
    }
    
    .kannada-text.large-text {
        font-size: 1.08em; /* 8% increase for already large text */
    }
    
    :root {
        --brand-yellow: #FFC107; --brand-red: #D32F2F; --brand-dark: #212121;
        --neutral-light: #ffffff; --neutral-medium: #f7f7f7; --neutral-gray: #757575;  
        --light-border: #eeeeee; --menu-hover-bg: #f0f0f0;
        --button-primary-text: var(--neutral-light); --button-primary-bg: var(--brand-red);
        --button-secondary-text: var(--brand-dark); --button-secondary-bg: var(--brand-yellow);
        --text-color: var(--brand-dark); --background-color: var(--neutral-light);
        --header-background: var(--neutral-light); --footer-background: var(--neutral-medium);
        --container-padding-mobile: 1rem; --container-padding-desktop: 1.5rem; 
        --container-max-width: 1280px;
        --footer-padding: 2rem 1rem;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
        font-family: 'PV Text', 'Noto Sans', sans-serif; 
        color: var(--text-color); 
        background-color: var(--background-color); 
        line-height: 1.6; 
        font-size: 16px; 
    }
    a { color: var(--brand-red); text-decoration: none; transition: color 0.2s ease; }
    a:hover { text-decoration: none; color: #b71c1c; } 
    img { max-width: 100%; height: auto; display: block; }
    button { font-family: inherit; cursor: pointer; border: none; background: transparent; padding: 0; }
    ul { list-style: none; }

    .site-header { background-color: var(--header-background); border-bottom: 1px solid var(--light-border); position: sticky; top: 0; z-index: 1000; box-shadow: 0 1px 3px rgba(0,0,0,0.04); }
    
    .header-container { 
        display: flex; justify-content: space-between; align-items: center; 
        max-width: var(--container-max-width); margin: 0 auto; 
        padding: 12px var(--container-padding-mobile); 
        min-height: 60px;
    }
    .header-left { display: flex; align-items: center; gap: 1rem; flex-grow: 1; min-width: 0; }
    
    .logo {
        line-height: 0; /* Helps remove extra space below image */
    }
    .logo a {
        text-decoration: none;
        display: inline-block; 
    }
    .logo a:hover {
        text-decoration: none;
    }
    .logo img { /* Styles for the SVG logo image */
        display: block; 
        height: 36px;   
        width: auto;    
        vertical-align: top; /* Use top or middle */
    }
    
    .desktop-nav-links { display: none; flex-grow: 1; min-width: 0; }
    .desktop-nav-links > ul { display: flex; align-items: stretch; gap: 0.5rem; height: 100%; width: max-content; }
    .desktop-nav-links > ul > li { position: relative; display: flex; align-items: center; flex-shrink: 0; }
    .desktop-nav-links > ul > li > a { 
        color: var(--brand-dark); text-decoration: none; font-size: 1rem; font-weight: 600; 
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        white-space: nowrap; padding: 0.5rem 0.75rem; border-bottom: 3px solid transparent; 
        transition: color 0.2s ease, border-color 0.2s ease; display: flex; align-items: center; 
        gap: 0.3rem; height: 100%; line-height: 1; margin: 0; cursor: pointer;
    }
    .desktop-nav-links > ul > li:hover > a { 
        color: var(--brand-red); 
        border-bottom-color: var(--brand-red);
    }
    .desktop-nav-links > ul > li.submenu-visible > a { color: var(--brand-red); border-bottom-color: var(--brand-red); }
    /* Default News Highlighting */
    .desktop-nav-links > ul > li.default-highlighted > a {
        color: var(--brand-red); 
        border-bottom-color: var(--brand-red);
    }
    
    .mega-menu-panel {
        display: none; position: absolute; top: 100%; left: 0;
        background-color: var(--neutral-light); border: 1px solid var(--light-border); border-top: none; 
        box-shadow: 0 5px 10px rgba(0,0,0,0.1); border-radius: 0 0 4px 4px; padding: 1rem; 
        z-index: 1050; flex-direction: row; flex-wrap: nowrap; gap: 1rem; 
    }
    .desktop-nav-links > ul > li.submenu-visible > .mega-menu-panel { display: flex; }
    .mega-menu-panel .sub-menu-column { list-style: none; padding: 0; margin: 0; flex-shrink: 0; min-width: 180px; }
    .mega-menu-panel .sub-menu-column li { margin-bottom: 0.25rem; }
    .mega-menu-panel .sub-menu-column a { 
        display: block; 
        padding: 0.5rem 0.75rem; 
        color: var(--brand-dark); 
        font-size: 0.9rem; 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        border-radius: 3px; 
    }
    .mega-menu-panel .sub-menu-column a:hover { background-color: var(--menu-hover-bg); color: var(--brand-red); }

    .header-right { display: flex; align-items: center; flex-shrink: 0; height: 100%; }
    .main-nav { display: flex; align-items: center; gap: 0.75rem; height: 100%; }
    .icon-button { 
        padding: 0.6rem; color: var(--brand-dark); display: inline-flex; 
        align-items: center; justify-content: center; font-size: 1.1rem; 
        border-radius: 50%; line-height: 1; margin: 0; height: auto;
        transition: all 0.2s ease;
    }
    .icon-button:hover { 
        color: var(--brand-red); 
        background-color: var(--menu-hover-bg); 
    }
    .login-button, .epaper-main-header-button { 
        color: var(--button-primary-text); padding: 0 1.2rem; border-radius: 20px; 
        font-weight: 600; font-size: 1rem; 
        transition: background-color 0.2s ease; 
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        white-space: nowrap; text-align: center; line-height: 1.2; margin: 0;
        display: inline-flex; align-items: center; justify-content: center; 
        height: 36px; min-height: 36px;
    }
    .login-button { background-color: var(--button-primary-bg); }
    .login-button:hover { 
        background-color: #b71c1c; 
        color: #ffffff;
    }
    .login-button.logged-in-state { background-color: var(--brand-red); color: var(--button-primary-text); } /* Same red as login */
    .login-button.logged-in-state:hover { 
        background-color: #b71c1c; 
        color: #ffffff;
    }
    .epaper-main-header-button { background-color: var(--button-secondary-bg); color: var(--button-secondary-text); display: inline-flex; align-items: center; gap: 0.4rem; }
    .epaper-main-header-button:hover { 
        background-color: #e3aa00; 
        color: var(--brand-dark);
    }
    .hamburger-icon { font-size: 1.4rem; margin-left: 0.25rem; }

    .mobile-menu-bar { background-color: var(--neutral-light); border-bottom: 1px solid var(--light-border); display: block; width: 100%; }
    .menu-container { max-width: var(--container-max-width); margin: 0 auto; border-top: 1px solid var(--light-border); padding: 0 0.4rem; }
    .mobile-nav-links { width: 100%; overflow-x: auto; }
    .mobile-nav-links ul { display: flex; white-space: nowrap; scrollbar-width: none; -ms-overflow-style: none; width: 100%; justify-content: space-between; }
    .mobile-nav-links ul::-webkit-scrollbar { display: none; }
    .mobile-nav-links li { flex-shrink: 0; flex-grow: 1; text-align: center; }
    .mobile-nav-links a {
        color: var(--brand-dark); font-size: 0.75rem; font-weight: 600; text-decoration: none; 
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        display: block; padding: 0.5rem 0.25rem; text-align: center; border-bottom: 3px solid transparent;
        transition: color 0.2s ease, border-color 0.2s ease; width: 100%; 
    }
    .mobile-nav-links a:hover, .mobile-nav-links a.active { color: var(--brand-red); border-bottom-color: var(--brand-red); }
    /* Default News Highlighting for Mobile */
    .mobile-nav-links a.default-highlighted {
        color: var(--brand-red); 
        border-bottom-color: var(--brand-red);
    }

    /* --- Featured Bar Styles --- */
    .featured-bar {
        background-color: var(--neutral-light); 
        padding: 0.5rem 0;
        border-bottom: 1px solid var(--light-border);
        font-size: 0.85rem;
    }
    .featured-container {
        max-width: var(--container-max-width);
        margin: 0 auto;
        padding: 0 var(--container-padding-mobile); 
        display: flex;
        align-items: center;
        justify-content: center; 
        overflow-x: auto; 
        white-space: nowrap; 
        -webkit-overflow-scrolling: touch; 
        scrollbar-width: none; 
        -ms-overflow-style: none; 
    }
    .featured-container::-webkit-scrollbar {
        display: none; 
    }
    .featured-icon-label { /* For the bullhorn icon */
        font-size: 1rem; 
        color: var(--brand-red); 
        margin-right: 0.75rem;
        flex-shrink: 0;
        line-height: 1;
        display: inline-flex;
        align-items: center;
    }
    .featured-bar ul {
        display: flex;
        list-style: none;
        padding: 0;
        margin: 0;
        gap: 0.75rem; 
    }
    .featured-bar li {
        flex-shrink: 0; 
    }
    .featured-bar a { /* For the featured item links/chips */
        background-color: #e8e8e8;
        color: var(--brand-dark);
        text-decoration: none;
        padding: 0.3rem 0.75rem;
        border-radius: 4px;
        transition: background-color 0.2s ease;
        display: inline-block;
        font-weight: bold;
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        line-height: 1.3;
    }
    .featured-bar a:hover {
        background-color: #d8d8d8;
        color: var(--brand-dark);
    }
    .featured-bar a.featured-highlight { /* For the highlighted featured item (Premium) */
        background-color: var(--brand-red);
        color: var(--neutral-light);
        font-weight: bold;
    }
    .featured-bar a.featured-highlight:hover {
        background-color: #b71c1c;
        color: var(--neutral-light);
    }
    .desktop-featured-bar { 
        display: block; 
    }
    .mobile-overlay-featured-bar { 
        display: none; 
        border-top: 1px solid var(--light-border); 
    }

    /* --- Overlay Menu UI --- */
    .overlay-menu-panel { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: var(--neutral-light); 
        z-index: 1100; opacity: 0; visibility: hidden; 
        transition: opacity 0.3s ease, visibility 0.3s ease; 
        display: flex; flex-direction: column; 
    }
    .overlay-menu-panel.is-open { 
        opacity: 1; visibility: visible; 
    }
    
    .overlay-menu-top-bar {
        display: flex; align-items: center; justify-content: space-between;
        max-width: var(--container-max-width); margin: 0 auto; 
        padding: 12px var(--container-padding-mobile); min-height: 60px;
        border-bottom: 1px solid var(--light-border); flex-shrink: 0; 
        background-color: var(--neutral-light); width: 100%; box-sizing: border-box;
    }
    .overlay-menu-top-bar .header-left { flex-grow: 1; }
    /* .overlay-menu-top-bar .logo a { font-size: 1.8rem; } /* Controlled by .logo img now */
    .overlay-menu-top-bar .main-nav { gap: 0.75rem; }
    .overlay-top-actions .epaper-text { display: inline; }
    
    .close-button-overlay-styled { 
        font-size: 1.4rem; padding: 0.6rem; margin-left: 0.25rem; 
        color: var(--brand-dark);
    }
    .close-button-overlay-styled:hover { color: var(--brand-red); background-color: var(--menu-hover-bg); }

    .overlay-menu-search-input-area {
        display: none; 
        padding: 1rem var(--container-padding-mobile); 
        border-bottom: 1px solid var(--light-border);
        background-color: var(--neutral-light); flex-shrink: 0;
        max-width: var(--container-max-width); margin: 0 auto;
        width: 100%;
        transform: translateX(100%);
        transition: transform 0.3s ease;
    }
    .overlay-menu-search-input-area.is-visible { 
        display: flex; 
        transform: translateX(0);
    }
    .overlay-menu-search-input-area input { 
        flex-grow: 1; border: 1px solid #ccc; border-right: none; 
        padding: 0.75rem 1rem; font-size: 1rem; border-radius: 25px 0 0 25px; outline: none;
    }
    .overlay-menu-search-input-area button { 
        padding: 0.75rem 1rem; background-color: var(--brand-red); 
        color: white; border-radius: 0 25px 25px 0; font-size: 1rem; 
    }
    .overlay-menu-body { 
        flex-grow: 1; overflow-y: auto; padding-top: 1rem; padding-bottom: 2rem;
        transform: translateX(100%);
        transition: transform 0.3s ease;
    }
    .overlay-menu-panel.is-open .overlay-menu-body {
        transform: translateX(0);
    }
    .overlay-main-nav > ul {
        display: flex; flex-wrap: wrap; justify-content: flex-start;
        align-items: stretch; gap: 0.5rem;
        padding: 0 var(--container-padding-mobile);
        max-width: var(--container-max-width); margin: 0 auto;
    }
    .overlay-main-nav > ul > li {
        flex-basis: calc(33.333% - 0.34rem); min-width: 180px;
        box-sizing: border-box; margin-bottom: 0.5rem;
    }

    /* Menu item wrapper - contains both link and expand button */
    .menu-item-wrapper {
        display: flex; align-items: stretch; box-sizing: border-box;
        background-color: var(--neutral-light); border-radius: 4px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.06); min-height: 60px;
        height: 100%; transition: background-color 0.2s ease, box-shadow 0.2s ease;
    }
    .menu-item-wrapper:hover {
        background-color: #fdfdfd; box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .menu-item-wrapper.active {
        box-shadow: 0 0 0 2px var(--brand-red), 0 2px 5px rgba(0,0,0,0.1);
        background-color: #fff0f0;
        border-radius: 8px; /* All corners rounded when expanded */
    }

    /* Main menu link - navigates to L1 page */
    .menu-item-link {
        flex: 1; display: flex; flex-direction: column; position: relative;
        padding: 0.6rem 0.5rem; text-decoration: none; color: var(--brand-dark);
        font-weight: 600; font-size: 0.9rem; box-sizing: border-box;
    }

    /* Expand button - toggles submenu */
    .expand-button {
        width: 48px; display: flex; align-items: center; justify-content: center;
        background: transparent; border: none; border-left: 1px solid var(--light-border);
        cursor: pointer; transition: background-color 0.2s ease; box-sizing: border-box;
        color: var(--brand-dark); padding: 0;
    }
    .expand-button:hover {
        background-color: rgba(0,0,0,0.05);
    }
    .expand-button:focus {
        outline: none;
    }
    .expand-button:focus-visible {
        outline: 2px solid var(--brand-red);
        outline-offset: -2px;
    }

    .menu-item-title {
        font-size: 0.9rem;
        text-transform: uppercase;
        letter-spacing: 0.02em;
        margin-bottom: 0.2rem;
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        font-weight: 600;
    }
    .menu-item-tagline {
        font-size: 0.75rem;
        color: var(--neutral-gray);
        line-height: 1.3;
        font-weight: normal;
        font-family: 'PV Text', 'Noto Sans', sans-serif;
    }
    .expand-icon {
        font-size: 0.9rem; color: #999; transition: transform 0.2s ease;
    }
    .expand-button.expanded .expand-icon {
        transform: rotate(180deg);
    }
    
    .overlay-header-search-container {
        display: none; width: 300px; margin-right: 0.5rem;
    }
    .overlay-header-search-input {
        flex-grow: 1; border: 1px solid #ccc; border-right: none;
        padding: 0.5rem; font-size: 0.85rem; border-radius: 20px 0 0 20px;
        outline: none; width: calc(100% - 40px);
    }
    .overlay-header-search-button {
        padding: 0.5rem; background-color: var(--brand-red); color: white;
        border-radius: 0 20px 20px 0; font-size: 0.85rem; width: 40px;
    }

    .full-width-l2-content {
        background-color: #fff0f0; display: none;
        width: 100%; box-sizing: border-box; clear: both;
        max-height: 0; opacity: 0; overflow: hidden;
        transition: max-height 0.35s ease-in-out, opacity 0.3s ease-in-out,
                    padding-top 0.35s ease-in-out, padding-bottom 0.35s ease-in-out,
                    margin-top 0.35s ease-in-out;
    }
    .full-width-l2-content.is-open {
        display: block; opacity: 1; padding: 1rem; margin-top: 0.5rem;
        border-radius: 8px; /* All corners rounded */
    }
    .full-width-l2-content .l2-columns-wrapper {
        display: flex; flex-direction: row; flex-wrap: wrap; gap: 1rem;
        max-width: var(--container-max-width); margin: 0 auto;
    }
    .full-width-l2-content .l2-column {
        list-style: none; padding: 0; margin: 0;
        flex-basis: calc(33.333% - 0.67rem); min-width: 180px; box-sizing: border-box;
    }
    .full-width-l2-content .l2-column li { margin-bottom: 0.1rem; }
    .full-width-l2-content .l2-column a { 
        display: block; 
        padding: 0.5rem 0.25rem; 
        font-size: 0.85rem; 
        color: var(--brand-dark); 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        text-decoration: none; 
        border-radius: 3px; 
        white-space: normal; 
        transition: background-color 0.2s ease, color 0.2s ease;
        font-weight: 500;
    }
    .full-width-l2-content .l2-column a:hover { background-color: rgba(211, 47, 47, 0.08); color: var(--brand-red); }

    /* --- Overlay Menu Follow Section --- */
    .overlay-follow-section {
        margin-top: 2rem;
        padding: 1.5rem var(--container-padding-mobile);
        border-top: 1px solid var(--light-border);
        text-align: center;
        max-width: var(--container-max-width);
        margin-left: auto;
        margin-right: auto;
    }
    .follow-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--brand-dark);
        margin-bottom: 1rem;
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
    }
    .overlay-social-links {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }
    .overlay-social-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: rgba(0,0,0,0.05);
        color: var(--brand-dark);
        font-size: 1.1rem;
        transition: background-color 0.2s ease, color 0.2s ease;
        text-decoration: none;
    }
    .overlay-social-link:hover {
        background-color: var(--brand-red);
        color: white;
        text-decoration: none;
    }

    .content-section { 
        max-width: var(--container-max-width); 
        margin: 2rem auto; 
        padding: 0 var(--container-padding-mobile); 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
    }
    
    .site-footer { background-color: var(--footer-background); padding: var(--footer-padding); margin-top: 2rem; border-top: 1px solid var(--light-border); }
    .footer-container { max-width: var(--container-max-width); margin: 0 auto; padding: 0 var(--container-padding-mobile); text-align: center; box-sizing: border-box; }
    .utility-links { display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem 2rem; margin-bottom: 2rem; }
    .utility-links a { 
        color: var(--neutral-gray); 
        font-size: 0.9rem; 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        transition: color 0.2s ease; 
    }
    .utility-links a:hover { color: var(--brand-dark); }
    .app-social-links { display: flex; flex-direction: column; align-items: center; margin: 1.5rem 0; gap: 1.5rem; }
    .app-links { display: flex; gap: 1.5rem; justify-content: center; }
    .app-link { 
        display: inline-flex; 
        align-items: center; 
        gap: 0.5rem; 
        color: var(--brand-dark); 
        font-size: 0.9rem; 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        padding: 0.5rem 0.75rem; 
        border-radius: 4px; 
        background-color: rgba(0,0,0,0.05); 
        transition: background-color 0.2s ease; 
    }
    .app-link:hover { background-color: rgba(0,0,0,0.1); text-decoration: none; }
    .social-links { display: flex; gap: 1rem; justify-content: center; }
    .social-link { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: 50%; background-color: rgba(0,0,0,0.05); color: var(--brand-dark); font-size: 1rem; transition: background-color 0.2s ease, color 0.2s ease; }
    .social-link:hover { background-color: var(--brand-red); color: white; text-decoration: none; }
    .copyright { 
        margin-top: 1.5rem; 
        font-size: 0.85rem; 
        color: var(--neutral-gray); 
        font-family: 'PV Text', 'Noto Sans', sans-serif;
    }

    /* --- Mobile Bottom Ad Slot --- */
    .mobile-bottom-ad {
        display: none; /* Hidden by default, shown only on mobile */
        position: fixed;
        bottom: 52px; /* Small padding below the ad */
        left: 0;
        right: 0;
        width: 100%;
        background-color: var(--neutral-light);
        border-top: 1px solid var(--light-border);
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
        z-index: 999;
        transition: bottom 0.3s ease;
    }
    .mobile-bottom-ad .ad-label {
        background-color: var(--neutral-light);
        color: var(--neutral-gray);
        font-size: 0.65rem;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 18px;
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        border-bottom: 1px solid var(--light-border);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    .mobile-bottom-ad .ad-content {
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: var(--neutral-light);
        max-width: 320px;
        margin: 0 auto;
        border: 1px dashed var(--neutral-gray);
        border-radius: 2px;
    }
    .mobile-bottom-ad .ad-placeholder {
        color: var(--neutral-gray);
        font-size: 0.8rem;
        font-family: 'PV Text', 'Noto Sans', sans-serif;
        text-align: center;
    }
    /* Position ad at bottom when bottom nav is hidden */
    .mobile-bottom-ad.nav-hidden {
        bottom: 2px;
    }
    /* Hide ad when scrolling on mobile */
    .mobile-bottom-ad.hide-on-scroll {
        transform: translateY(100%);
    }

    /* --- Mobile Bottom Sticky Navigation --- */
    .mobile-bottom-nav {
        display: none; /* Hidden by default, shown only on mobile */
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: var(--neutral-light);
        border-top: 1px solid var(--light-border);
        z-index: 1000;
        padding: 0.25rem 0;
    }
    .mobile-nav-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        flex: 1;
        padding: 0.25rem 0.25rem;
        text-decoration: none;
        color: var(--brand-dark);
        font-size: 0.75rem;
        font-weight: 500;
        font-family: 'PV Headline', 'Noto Sans', sans-serif;
        transition: color 0.2s ease;
        border: none;
        background: transparent;
        cursor: pointer;
    }
    .mobile-nav-item i {
        font-size: 1.2rem;
        margin-bottom: 0.2rem;
        display: block;
    }
    .mobile-nav-item span {
        display: block;
        line-height: 1;
        text-align: center;
    }
    .mobile-nav-item:hover,
    .mobile-nav-item:focus {
        color: var(--brand-red);
        text-decoration: none;
    }

    @media (min-width: 992px) { /* Desktop */
        :root { --container-padding-desktop: 1.5rem; }
        .header-container, .overlay-menu-top-bar { padding: 12px var(--container-padding-desktop); min-height: 64px;}
        .featured-container { padding: 0 var(--container-padding-desktop); }
        .mobile-overlay-featured-bar { display: none !important; } 
        .overlay-header-search-container { display: flex; width: 300px; }
        .overlay-search-icon { display: none; }
        .overlay-menu-search-input-area { display: none; }
        .desktop-nav-links { display: flex; }
        .mobile-menu-bar { display: none; }
        .overlay-menu-top-bar .main-nav { gap: 0.75rem; } 
        .overlay-menu-search-input-area { padding-left: var(--container-padding-desktop); padding-right: var(--container-padding-desktop); }
        .overlay-menu-body { padding: 1rem 0; }
        .overlay-main-nav > ul { padding: 0 var(--container-padding-desktop); gap: 0.75rem 1rem; }
        .overlay-main-nav > ul > li { flex-basis: calc(33.333% - 0.67rem); margin-bottom: 0.5rem;}
        .menu-item-link { padding: 0.5rem 0.75rem;}
        .full-width-l2-content.is-open { padding: 0.5rem var(--container-padding-desktop); margin-top: 0.2rem; }
        .full-width-l2-content .l2-column { flex-basis: calc(33.333% - 0.67rem); min-width: 200px; }
        .content-section, .footer-container { padding: 0 var(--container-padding-desktop); }
        .overlay-menu-top-bar .logo img { height: 36px; }
        .overlay-follow-section { padding: 1.5rem var(--container-padding-desktop); }
        
        /* Make featured bar sticky on desktop */
        .desktop-featured-bar {
            position: sticky;
            top: 64px; /* Below the sticky header */
            z-index: 999;
            background-color: var(--neutral-light);
            transition: transform 0.3s ease;
        }
        .desktop-featured-bar.hide-on-scroll {
            transform: translateY(-100%);
        }
        
        /* Desktop hamburger menu animation - expand from header */
        .overlay-menu-body {
            transform: translateY(-100%); /* Start above screen */
        }
        .overlay-menu-panel.is-open .overlay-menu-body {
            transform: translateY(0); /* Slide down into view */
        }
        .overlay-menu-search-input-area {
            transform: translateY(-100%);
        }
        .overlay-menu-search-input-area.is-visible {
            transform: translateY(0);
        }
    }
    @media (min-width: 768px) and (max-width: 991.98px) { /* Tablet */
        .header-container, .overlay-menu-top-bar { padding: 12px var(--container-padding-mobile); min-height: 56px;}
        .desktop-featured-bar { display: block; } 
        .mobile-overlay-featured-bar { display: none !important; } 
        .featured-container { padding: 0 var(--container-padding-mobile); }
        .overlay-header-search-container { display: flex; width: 220px; }
        .overlay-search-icon { display: none; }
        .overlay-menu-search-input-area { display: none; }
        .desktop-nav-links { display: flex; } 
        .mobile-menu-bar { display: none; }
        .overlay-menu-top-bar .main-nav { gap: 0.75rem; }

        .overlay-menu-top-bar .overlay-search-icon { font-size: 1rem; padding: 0.5rem; }
        .close-button-overlay-styled { font-size: 1.2rem; padding: 0.5rem; margin-left: 0.1rem;}
        .overlay-menu-body { padding: 1rem 0; }
        .overlay-main-nav > ul { gap: 0.75rem; }
        .overlay-main-nav > ul > li { flex-basis: calc(50% - 0.375rem); margin-bottom: 0.5rem; }
        .full-width-l2-content.is-open { margin-top: 0.5rem; }
        .full-width-l2-content .l2-column { flex-basis: calc(50% - 0.5rem); }
        .overlay-menu-top-bar .logo img { height: 32px; }
        
        /* Tablet hamburger menu animation - expand from header */
        .overlay-menu-body {
            transform: translateY(-100%); /* Start above screen */
        }
        .overlay-menu-panel.is-open .overlay-menu-body {
            transform: translateY(0); /* Slide down into view */
        }
        .overlay-menu-search-input-area {
            transform: translateY(-100%);
        }
        .overlay-menu-search-input-area.is-visible {
            transform: translateY(0);
        }
    }
    @media (max-width: 767.98px) { /* Mobile */
        .featured-container {
            justify-content: flex-start; 
        }
        .header-container, .overlay-menu-top-bar { padding: 12px; min-height: auto; }
        /* .logo a, .overlay-menu-top-bar .logo a { font-size: 1.5rem; } /* Text logo, not needed for SVG */
        .logo img, .overlay-menu-top-bar .logo img { /* SVG logo size for mobile */
            height: 28px; 
        }
        .desktop-featured-bar { display: none; } 
        .mobile-overlay-featured-bar { display: block; } 
        .desktop-nav-links { display: none; }
        .mobile-menu-bar { display: block; }
        .hamburger-icon { margin-left: 0; }
        .search-icon { display: none; } 
        .main-nav { gap: 0.25rem; }
        .overlay-menu-top-bar .main-nav { gap: 0.25rem; }
        .login-button { padding: 0 0.5rem; height: 30px; min-height: 30px; line-height: 1.2; }
        .epaper-main-header-button { padding: 0 0.5rem; height: 30px; min-height: 30px; line-height: 1.2; }
        .overlay-menu-top-bar .overlay-search-icon { font-size: 1rem; padding: 0.5rem; }
        .close-button-overlay-styled { font-size: 1.2rem; width: 36px; height: 36px; margin-left: 0; padding: 0.4rem;}
        .overlay-menu-body { padding-top: 0; padding-bottom: 1rem; }
        .overlay-main-nav > ul {
            flex-direction: column; flex-wrap: nowrap;
            padding: var(--container-padding-mobile); gap: 0.75rem;
        }
        .overlay-main-nav > ul > li {
            flex-basis: auto; width: 100%; margin-bottom: 0; border: none;
        }
        .menu-item-wrapper {
            border: none; border-radius: 8px; min-height: auto;
            background-color: var(--neutral-light);
            box-shadow: 0 1px 3px rgba(0,0,0,0.08), 0 2px 0 rgba(0,0,0,0.05);
        }
        .menu-item-wrapper.active {
            background-color: #fff0f0;
            box-shadow: 0 0 0 2px var(--brand-red), 0 2px 5px rgba(0,0,0,0.1);
        }
        .menu-item-link {
            padding: 1rem;
        }
        .expand-button {
            border-left: 1px solid #e0e0e0;
        }
        .full-width-l2-content.is-open {
            padding: 1rem;
        }
        .full-width-l2-content .l2-columns-wrapper {
            flex-direction: row; flex-wrap: wrap; gap: 1rem;
        }
        .full-width-l2-content .l2-column {
            padding: 0; min-width: 0;
            flex-basis: calc(50% - 0.5rem); /* 2 columns on mobile */
        }
        .full-width-l2-content .l2-column li { margin-bottom: 0;}
        .full-width-l2-content .l2-column a { padding: 0.5rem 0; }
        .mobile-bottom-nav { display: flex; } /* Show mobile bottom nav on mobile */
        .mobile-bottom-ad { display: block; } /* Show mobile bottom ad on mobile */
        body { padding-bottom: 85px; } /* Add padding for when both ad and nav are visible */
        
        /* Make main header non-sticky on mobile */
        .site-header { position: static; box-shadow: none; }
        
        /* Make mobile menu bar sticky on mobile */
        .mobile-menu-bar { 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
            transition: transform 0.3s ease;
        }
        .mobile-menu-bar.hide-on-scroll {
            transform: translateY(-100%);
        }
        
        /* Update mobile bottom nav for scroll behavior */
        .mobile-bottom-nav { 
            display: flex;
            transform: translateY(0); /* Default visible state */
            transition: transform 0.3s ease;
        }
        .mobile-bottom-nav.hide-on-scroll {
            transform: translateY(100%); /* Hidden state */
        }
    }
</style>
</head>
<body>

    <div class="simple-top-nav">
    <a href="index.html">Home page</a>
    <a href="storypage.html">Story page</a>
</div>

    <header class="site-header">
        <div class="header-container">
            <div class="header-left">
                <div class="logo">
    <a href="#" id="mainLogoAnchor"> <!-- Changed ID for clarity, or you can remove it if not specifically targeted -->
        <img src="pv logo.svg" alt="Prajavani Home" id="mainLogoImage">
    </a>
</div>
                <nav class="desktop-nav-links" id="desktopNav"><ul id="desktopNavUl"></ul></nav>
            </div>
            <div class="header-right">
                <nav class="main-nav">
                    <button class="icon-button search-icon" aria-label="Search"><i class="fas fa-search"></i></button>
                    <a href="/login" class="button login-button" aria-label="Login to Account">Login</a>
                    <a href="/epaper" class="button epaper-main-header-button"><i class="fas fa-newspaper"></i> <span class="epaper-text">Read ePaper</span></a>
                    <button id="hamburgerBtn" class="icon-button hamburger-icon" aria-label="Open Menu" aria-expanded="false"><i class="fas fa-bars"></i></button>
                </nav>
            </div>
        </div>
    </header>

    <div class="mobile-menu-bar" id="mobileMenuBar">
        <div class="menu-container"><nav class="mobile-nav-links"><ul id="mobileNavUl"></ul></nav></div>
    </div>

    <!-- NEW: Desktop Featured Bar -->
    <nav class="featured-bar desktop-featured-bar" id="desktopFeaturedBar" aria-label="Featured Topics">
        <div class="featured-container">
    <i class="fas fa-bullhorn featured-icon-label" id="desktopFeaturedIconLabel" aria-hidden="true"></i>
    <ul id="desktopFeaturedUl">
        <!-- JS will populate this -->
    </ul>
</div>
    </nav>

    <div id="overlayMenu" class="overlay-menu-panel" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="overlayMenuTitleLogo">
        <div class="overlay-menu-top-bar">
            <div class="header-left">
                <div class="logo overlay-logo-main" id="overlayMenuTitleLogo">
    <a href="#" id="overlayLogoAnchor"> <!-- Changed ID for clarity -->
        <img src="pv logo.svg" alt="Prajavani Home" id="overlayLogoImage">
    </a>
</div>
            </div>
            <div class="header-right">
                <nav class="main-nav overlay-actions-nav"> 
                    <div class="overlay-header-search-container">
                        <input type="text" class="overlay-header-search-input" placeholder="ಪ್ರಜಾವಾಣಿಯಲ್ಲಿ ಹುಡುಕಿ...">
                        <button class="overlay-header-search-button"><i class="fas fa-search"></i></button>
                    </div>
                    <button class="icon-button overlay-search-icon" aria-label="Search">
                        <i class="fas fa-search"></i>
                    </button>
                    <a href="/login" class="button login-button overlay-login-button" aria-label="Login to Account">Login</a>
                    <a href="/epaper" class="button epaper-main-header-button overlay-epaper-button">
                        <i class="fas fa-newspaper"></i> <span class="epaper-text">Read ePaper</span>
                    </a>
                    <button id="closeMenuBtn" class="icon-button close-button-overlay-styled" aria-label="Close Menu"> 
                        <i class="fas fa-times"></i>
                    </button>
                </nav>
            </div>
        </div>

        <!-- NEW: Mobile Overlay Featured Bar -->
        <nav class="featured-bar mobile-overlay-featured-bar" id="mobileOverlayFeaturedBar" aria-label="Featured Topics">
            <div class="featured-container">
    <i class="fas fa-bullhorn featured-icon-label" id="mobileOverlayFeaturedIconLabel" aria-hidden="true"></i>
    <ul id="mobileOverlayFeaturedUl">
        <!-- JS will populate this -->
    </ul>
</div>
        </nav>

        <div class="overlay-menu-search-input-area">
            <input type="text" id="overlaySearchInput" placeholder="ಪ್ರಜಾವಾಣಿಯಲ್ಲಿ ಹುಡುಕಿ...">
            <button class="icon-button"><i class="fas fa-search"></i></button>
        </div>
        <div class="overlay-menu-body">
            <nav class="overlay-main-nav">
                <ul id="overlayNavUl"></ul>
            </nav>
            <div id="fullWidthL2ContentHolder" class="full-width-l2-content"></div>
            
            <!-- Follow Us Section -->
            <div class="overlay-follow-section">
                <div class="follow-title">Follow Us</div>
                <div class="overlay-social-links">
                    <a href="#" class="overlay-social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="overlay-social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="overlay-social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="overlay-social-link"><i class="fab fa-youtube"></i></a>
                    <a href="#" class="overlay-social-link"><i class="fab fa-telegram"></i></a>
                    <a href="#" class="overlay-social-link"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
        </div>
    </div>


    <main>
        <div class="content-section">
            <p>Main content goes here. Scroll down to see sticky header.</p>
            <p>currentMenuLanguage = 'en';</p>
<p>populateAllMenus(); // This also calls populateFeaturedBars()</p>
<p>updateStaticUIText();</p>
<p>initDesktopNavInteractions();</p>
            <div style="height: 1000px;"></div>
        </div>
    </main>
    <footer class="site-footer">
        <div class="footer-container">
           <nav class="utility-links">
               <a href="#">About Us</a> <a href="#">Contact Us</a> <a href="#">The Printers Mysore</a> <a href="#">Deccan Herald</a> <a href="#">Sudha</a> <a href="#">Mayura</a> <a href="#">Epaper</a> <a href="#">Privacy Policy</a> <a href="#">Terms & Conditions</a> <a href="#">Disclaimer</a>
           </nav>
           <div class="app-social-links">
               <div class="app-links">
                   <a href="#" class="app-link"><i class="fab fa-google-play"></i> Google Play</a>
                   <a href="#" class="app-link"><i class="fab fa-apple"></i> App Store</a>
               </div>
               <div class="social-links">
                   <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a> <a href="#" class="social-link"><i class="fab fa-twitter"></i></a> <a href="#" class="social-link"><i class="fab fa-instagram"></i></a> <a href="#" class="social-link"><i class="fab fa-youtube"></i></a> <a href="#" class="social-link"><i class="fab fa-telegram"></i></a> <a href="#" class="social-link"><i class="fab fa-whatsapp"></i></a>
               </div>
           </div>
           <div class="copyright"> © 2024 The Printers (Mysore) Private Ltd. </div>
       </div>
   </footer>

    <!-- Mobile Bottom Ad Slot -->
    <div class="mobile-bottom-ad" id="mobileBottomAd">
        <div class="ad-label">Advertisement</div>
        <div class="ad-content">
            <!-- Ad content will be inserted here -->
            <div class="ad-placeholder">320 x 50</div>
        </div>
    </div>

    <!-- Mobile Bottom Sticky Navigation -->
    <nav class="mobile-bottom-nav" id="mobileBottomNav">
        <a href="/" class="mobile-nav-item">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="/op-ed/podcast" class="mobile-nav-item">
            <i class="fas fa-podcast"></i>
            <span>Podcasts</span>
        </a>
        <a href="/epaper" class="mobile-nav-item">
            <i class="fas fa-newspaper"></i>
            <span>ePaper</span>
        </a>
        <button class="mobile-nav-item mobile-nav-menu-btn" id="mobileBottomMenuBtn">
            <i class="fas fa-bars"></i>
            <span>Menu</span>
        </button>
    </nav>

    <script id="menuDataSource" type="application/json">
    [
      {"kannadaTitle":"ಸುದ್ದಿ","englishTitle":"News","id":"news","href":"/news","subItems":[{"kannadaTitle":"ರಾಷ್ಟ್ರೀಯ","englishTitle":"National","href":"/news/national"},{"kannadaTitle":"ವಿದೇಶ","englishTitle":"World","href":"/news/world"},{"kannadaTitle":"ರಾಜ್ಯ","englishTitle":"State","href":"/news/state"},{"kannadaTitle":"ಫ್ಯಾಕ್ಟ್ ಚೆಕ್","englishTitle":"Fact Check","href":"/news/fact-check"},{"kannadaTitle":"ಸಮಗ್ರ ಮಾಹಿತಿ","englishTitle":"Explainer","href":"/news/explainer"}],"tagline":"National, World, State & more","showInMobileBar":true},
      {"kannadaTitle":"ಜಿಲ್ಲೆ","englishTitle":"Districts","id":"districts","href":"/districts","subItems":[{"kannadaTitle":"ಬೆಂಗಳೂರು","englishTitle":"Bengaluru City","href":"/districts/bengaluru-city"},{"kannadaTitle":"ಬೆಂಗಳೂರು ಗ್ರಾಮಾಂತರ","englishTitle":"Bengaluru Rural","href":"/districts/bengaluru-rural"},{"kannadaTitle":"ಕಲಬುರಗಿ","englishTitle":"Kalaburagi","href":"/districts/kalaburagi"},{"kannadaTitle":"ಚಾಮರಾಜನಗರ","englishTitle":"Chamarajanagara","href":"/districts/chamarajanagara"},{"kannadaTitle":"ರಾಮನಗರ","englishTitle":"Ramanagara","href":"/districts/ramanagara"},{"kannadaTitle":"ಚಿಕ್ಕಬಳ್ಳಾಪುರ","englishTitle":"Chikkaballapur","href":"/districts/chikkaballapur"},{"kannadaTitle":"ಕೋಲಾರ","englishTitle":"Kolar","href":"/districts/kolar"},{"kannadaTitle":"ತುಮಕೂರು","englishTitle":"Tumakuru","href":"/districts/tumakuru"},{"kannadaTitle":"ಮೈಸೂರು","englishTitle":"Mysuru","href":"/districts/mysuru"},{"kannadaTitle":"ಮಂಡ್ಯ","englishTitle":"Mandya","href":"/districts/mandya"},{"kannadaTitle":"ಕೊಡಗು","englishTitle":"Kodagu","href":"/districts/kodagu"},{"kannadaTitle":"ಹಾಸನ","englishTitle":"Hasana","href":"/districts/hasana"},{"kannadaTitle":"ದಕ್ಷಿಣ ಕನ್ನಡ","englishTitle":"Dakshina Kannada","href":"/districts/dakshina-kannada"},{"kannadaTitle":"ಉಡುಪಿ","englishTitle":"Udupi","href":"/districts/udupi"},{"kannadaTitle":"ಚಿಕ್ಕಮಗಳೂರು","englishTitle":"Chikkamagaluru","href":"/districts/chikkamagaluru"},{"kannadaTitle":"ದಾವಣಗೆರೆ","englishTitle":"Davanagere","href":"/districts/davanagere"},{"kannadaTitle":"ಶಿವಮೊಗ್ಗ","englishTitle":"Shivamogga","href":"/districts/shivamogga"},{"kannadaTitle":"ಚಿತ್ರದುರ್ಗ","englishTitle":"Chitradurga","href":"/districts/chitradurga"},{"kannadaTitle":"ಧಾರವಾಡ","englishTitle":"Dharwad","href":"/districts/dharwad"},{"kannadaTitle":"ಗದಗ","englishTitle":"Gadaga","href":"/districts/gadaga"},{"kannadaTitle":"ಹಾವೇರಿ","englishTitle":"Haveri","href":"/districts/haveri"},{"kannadaTitle":"ವಿಜಯಪುರ","englishTitle":"Vijayapura","href":"/districts/vijayapura"},{"kannadaTitle":"ಬೆಳಗಾವಿ","englishTitle":"Belagavi","href":"/districts/belagavi"},{"kannadaTitle":"ಬಾಗಲಕೋಟೆ","englishTitle":"Bagalkot","href":"/districts/bagalkot"},{"kannadaTitle":"ಉತ್ತರ ಕನ್ನಡ","englishTitle":"Uttara Kannada","href":"/districts/uttara-kannada"},{"kannadaTitle":"ಬಳ್ಳಾರಿ","englishTitle":"Ballari","href":"/districts/ballari"},{"kannadaTitle":"ಬೀದರ್","englishTitle":"Bidar","href":"/districts/bidar"},{"kannadaTitle":"ಕೊಪ್ಪಳ","englishTitle":"Koppal","href":"/districts/koppal"},{"kannadaTitle":"ಯಾದಗಿರಿ","englishTitle":"Yadagiri","href":"/districts/yadagiri"},{"kannadaTitle":"ರಾಯಚೂರು","englishTitle":"Raichur","href":"/districts/raichur"},{"kannadaTitle":"ವಿಜಯನಗರ","englishTitle":"Vijayanagara","href":"/districts/vijayanagara"}],"tagline":"Bengaluru City, Bengaluru Rural, Kalaburagi & more","showInMobileBar":true},
      {"kannadaTitle":"ಅಭಿಮತ","englishTitle":"Op-Ed","id":"op-ed","href":"/op-ed","subItems":[{"kannadaTitle":"ಸಂಪಾದಕೀಯ","englishTitle":"Editorial","href":"/op-ed/editorial"},{"kannadaTitle":"ಲೇಖನಗಳು","englishTitle":"Articles","href":"/op-ed/articles"},{"kannadaTitle":"ವ್ಯಕ್ತಿಚಿತ್ರ","englishTitle":"Profile","href":"/op-ed/profile"},{"kannadaTitle":"ಪ್ರಜಾವಾಣಿ ಕಡತಗಳಿಂದ","englishTitle":"Prajavani Archives","href":"/op-ed/prajavani-archives"},{"kannadaTitle":"ಚುರುಮುರಿ","englishTitle":"Churumuri","href":"/op-ed/churumuri"},{"kannadaTitle":"ಚರ್ಚೆ","englishTitle":"Discussion","href":"/op-ed/discussion"},{"kannadaTitle":"ವಾಚಕರ ವಾಣಿ","englishTitle":"Reader's Letter","href":"/op-ed/readers-letter"},{"kannadaTitle":"ಸಂಗತ","englishTitle":"Opinion","href":"/op-ed/opinion"},{"kannadaTitle":"ಕನ್ನಡ ಧ್ವನಿ","englishTitle":"Podcast","href":"/op-ed/podcast"},{"kannadaTitle":"ಸಂದರ್ಶನ","englishTitle":"Interview","href":"/op-ed/interview"},{"kannadaTitle":"ಅಂಕಣಗಳು","englishTitle":"Columns","href":"/op-ed/columns"}],"tagline":"Editorial, Articles, Profile & more","showInMobileBar":true},
      {"kannadaTitle":"ಭವಿಷ್ಯ","englishTitle":"Horoscope","id":"horoscope","href":"/horoscope","subItems":[{"kannadaTitle":"ದಿನ ಭವಿಷ್ಯ","englishTitle":"Daily Horoscope","href":"/horoscope/daily-horoscope"},{"kannadaTitle":"ವಾರ ಭವಿಷ್ಯ","englishTitle":"Weekly Horoscope","href":"/horoscope/weekly-horoscope"},{"kannadaTitle":"ಮಾಸ ಭವಿಷ್ಯ","englishTitle":"Monthly Horoscope","href":"/horoscope/monthly-horoscope"},{"kannadaTitle":"ವರ್ಷ ಭವಿಷ್ಯ","englishTitle":"Yearly Horoscope","href":"/horoscope/yearly-horoscope"},{"kannadaTitle":"ಪಂಚಾಂಗ","englishTitle":"Panchanga","href":"/horoscope/panchanga"},{"kannadaTitle":"ಜ್ಯೋತಿಷ","englishTitle":"Astrology","href":"/horoscope/astrology"},{"kannadaTitle":"ವಾಸ್ತು","englishTitle":"Vaastu","href":"/horoscope/vaastu"}],"tagline":"Daily Horoscope, Weekly Horoscope, Monthly Horoscope & more","showInMobileBar":true},
      {"kannadaTitle":"ಸಿನಿಮಾ ಜಗತ್ತು","englishTitle":"Entertainment","id":"entertainment","href":"/entertainment","subItems":[{"kannadaTitle":"ಸಿನಿ ಸುದ್ದಿ","englishTitle":"Cinema News","href":"/entertainment/cinema-news"},{"kannadaTitle":"ಸಿನಿಮಾ ವಿಮರ್ಶೆ","englishTitle":"Movie Review","href":"/entertainment/movie-review"},{"kannadaTitle":"ಟಿವಿ","englishTitle":"TV","href":"/entertainment/tv"},{"kannadaTitle":"ರಂಗಭೂಮಿ","englishTitle":"Theatre","href":"/entertainment/theatre"},{"kannadaTitle":"ಡಿಜಿಟಲ್-ಒಟಿಟಿ","englishTitle":"Digital-OTT","href":"/entertainment/digital-ott"}],"tagline":"Cinema News, Movie Review, TV & more","showInMobileBar":false},
      {"kannadaTitle":"ಜೀವನಶೈಲಿ","englishTitle":"Lifestyle","id":"lifestyle","href":"/lifestyle","subItems":[{"kannadaTitle":"ಆರೋಗ್ಯ","englishTitle":"Health","href":"/lifestyle/health"},{"kannadaTitle":"ಆಹಾರ","englishTitle":"Food","href":"/lifestyle/food"},{"kannadaTitle":"ಕಲೆ ಮತ್ತು ಸಾಹಿತ್ಯ","englishTitle":"Art & Literature","href":"/lifestyle/art-and-literature"},{"kannadaTitle":"ನಮ್ಮ ಮನೆ","englishTitle":"My Home","href":"/lifestyle/my-home"},{"kannadaTitle":"ಸುತ್ತಾಟ","englishTitle":"Leisure & Travel","href":"/lifestyle/leisure-and-travel"},{"kannadaTitle":"ಸೌಂದರ್ಯ","englishTitle":"Beauty","href":"/lifestyle/beauty"},{"kannadaTitle":"ಪರಿಸರ","englishTitle":"Environment","href":"/lifestyle/environment"},{"kannadaTitle":"ಸಮಾಜ ಮತ್ತು ಸಂಸ್ಕೃತಿ","englishTitle":"Community & Culture","href":"/lifestyle/community-and-culture"},{"kannadaTitle":"ಕೃಷಿ","englishTitle":"Agriculture","href":"/lifestyle/agriculture"},{"kannadaTitle":"ಆಟೋಮೊಬೈಲ್","englishTitle":"Automobile","href":"/lifestyle/automobile"}],"tagline":"Health, Food, Art & Literature & more","showInMobileBar":true},
      {"kannadaTitle":"ವಾಣಿಜ್ಯ","englishTitle":"Business","id":"business","href":"/business","subItems":[{"kannadaTitle":"ವಾಣಿಜ್ಯ ಸುದ್ದಿ","englishTitle":"Commerce News","href":"/business/commerce-news"},{"kannadaTitle":"ಹಣಕಾಸು ವಿಚಾರ","englishTitle":"Personal Finance","href":"/business/personal-finance"},{"kannadaTitle":"ಷೇರು ಮಾರುಕಟ್ಟೆ","englishTitle":"Stock Market","href":"/business/stock-market"},{"kannadaTitle":"ಬಜೆಟ್","englishTitle":"Budget","href":"/business/budget"},{"kannadaTitle":"ನವೋದ್ಯಮ","englishTitle":"Startup","href":"/business/startup"},{"kannadaTitle":"ಪ್ರಶ್ನೋತ್ತರ","englishTitle":"Q&A","href":"/business/qanda"},{"kannadaTitle":"ಬಂಡವಾಳ ಮಾರುಕಟ್ಟೆ","englishTitle":"Capital Market","href":"/business/capital-market"},{"kannadaTitle":"ಹಣಕಾಸು ಸಾಕ್ಷರತೆ","englishTitle":"Finance Literacy","href":"/business/finance-literacy"},{"kannadaTitle":"ಷೇರು ಸಮಾಚಾರ","englishTitle":"Share News","href":"/business/share-news"}],"tagline":"Commerce News, Personal Finance, Stock Market & more","showInMobileBar":false},
      {"kannadaTitle":"ಕ್ರೀಡೆ","englishTitle":"Sports","id":"sports","href":"/sports","subItems":[{"kannadaTitle":"ಕ್ರಿಕೆಟ್","englishTitle":"Cricket","href":"/sports/cricket"},{"kannadaTitle":"ಫುಟ್‌ಬಾಲ್","englishTitle":"Football","href":"/sports/football"},{"kannadaTitle":"ಟೆನಿಸ್","englishTitle":"Tennis","href":"/sports/tennis"},{"kannadaTitle":"ಇತರೆ ಕ್ರೀಡೆಗಳು","englishTitle":"Other Sports","href":"/sports/other-sports"},{"kannadaTitle":"ವಿಶ್ವಕಪ್","englishTitle":"World Cup","href":"/sports/world-cup"},{"kannadaTitle":"ಕ್ರೀಡಾಂಕಣ","englishTitle":"Sports Column/Arena","href":"/sports/sports-columnarena"}],"tagline":"Cricket, Football, Tennis & more","showInMobileBar":false},
      {"kannadaTitle":"ತಂತ್ರಜ್ಞาน","englishTitle":"Technology","id":"technology","href":"/technology","subItems":[{"kannadaTitle":"ಗ್ಯಾಜೆಟ್ ಸುದ್ದಿ","englishTitle":"Gadget News","href":"/technology/gadget-news"},{"kannadaTitle":"ತಂತ್ರಜ್ಞಾನ ಟಿಪ್ಸ್","englishTitle":"Tech Tips","href":"/technology/tech-tips"},{"kannadaTitle":"ಸಾಮಾಜಿಕ ಮಾಧ್ಯಮ","englishTitle":"Social Media","href":"/technology/social-media"},{"kannadaTitle":"ಗ್ಯಾಜೆಟ್ ವಿಮರ್ಶೆ","englishTitle":"Gadget Review","href":"/technology/gadget-review"},{"kannadaTitle":"ವಿಜ್ಞಾನ","englishTitle":"Science","href":"/technology/science"},{"kannadaTitle":"ವೈರಲ್","englishTitle":"Viral","href":"/technology/viral"}],"tagline":"Gadget News, Tech Tips, Social Media & more","showInMobileBar":false},
      {"kannadaTitle":"ಶಿಕ್ಷಣ ಮತ್ತು ಉದ್ಯೋಗ","englishTitle":"Education & Career","id":"education-and-career","href":"/education-and-career","subItems":[{"kannadaTitle":"ಶಿಕ್ಷಣ","englishTitle":"Education","href":"/education-and-career/education"},{"kannadaTitle":"ಮಾರ್ಗದರ್ಶಿ","englishTitle":"Guide","href":"/education-and-career/guide"},{"kannadaTitle":"ಉದ್ಯೋಗ","englishTitle":"Career","href":"/education-and-career/career"}],"tagline":"Education, Guide, Career","showInMobileBar":false},
      {"kannadaTitle":"ಪ್ರಜಾ ಮತ","englishTitle":"Elections","id":"elections","href":"/elections","subItems":[{"kannadaTitle":"ಅಭ್ಯರ್ಥಿಯ ಜೊತೆ","englishTitle":"With Candidate","href":"/elections/with-candidate"},{"kannadaTitle":"ಚುನಾವಣಾ ರಿಂಗಣ-2014","englishTitle":"Elections-2014","href":"/elections/elections-2014"},{"kannadaTitle":"ಲೋಕ ಚರಿತ್ರೆ","englishTitle":"Lok Sabha History","href":"/elections/lok-sabha-history"},{"kannadaTitle":"ವೋಟ್ ಹಾಕಿ","englishTitle":"Cast Your Vote","href":"/elections/cast-your-vote"},{"kannadaTitle":"ಕ್ಷೇತ್ರ ಪರಿಚಯ","englishTitle":"Constituency Introduction","href":"/elections/constituency-introduction"},{"kannadaTitle":"ಕೇಳ್ರಪ್ಪೋ ಕೇಳಿ","englishTitle":"Voter's Alert","href":"/elections/voters-alert"},{"kannadaTitle":"ಮತ ಮೆಲುಕು","englishTitle":"Vote Reflection","href":"/elections/vote-reflection"},{"kannadaTitle":"ಚುನಾವಣಾ ಹಿನ್ನೋಟ","englishTitle":"Election Flashback","href":"/elections/election-flashback"},{"kannadaTitle":"ಚುನಾವಣಾ ರಿಂಗಣ-2018","englishTitle":"Elections-2018","href":"/elections/elections-2018"},{"kannadaTitle":"ಚುನಾವಣಾ ಯಾತ್ರೆ","englishTitle":"Election Yatra","href":"/elections/election-yatra"},{"kannadaTitle":"ಚುನಾವಣಾ ಭಾರತ","englishTitle":"India Elections","href":"/elections/india-elections"},{"kannadaTitle":"ಚುನಾವಣಾ ಚುಟುಕು","englishTitle":"Election Snippets","href":"/elections/election-snippets"},{"kannadaTitle":"ಚುನಾವಣಾ ಕರ್ನಾಟಕ","englishTitle":"Karnataka Elections","href":"/elections/karnataka-elections"},{"kannadaTitle":"ಚುನಾವಣಾ ಕದನ ಕಣ","englishTitle":"Poll Battle","href":"/elections/poll-battle"},{"kannadaTitle":"ಪ್ರಜಾ ಮತ 2018","englishTitle":"Prajamata 2018","href":"/elections/prajamata-2018"}],"tagline":"With Candidate, Elections-2014, Lok Sabha History & more","showInMobileBar":false},
      {"kannadaTitle":"ಇತರೆ","englishTitle":"Others","id":"others","href":"/others","subItems":[{"kannadaTitle":"ವಿಶೇಷ","englishTitle":"Specials","href":"/others/specials"},{"kannadaTitle":"ಮಲ್ಟಿಮೀಡಿಯಾ","englishTitle":"Multimedia","href":"/others/multimedia"},{"kannadaTitle":"ವಿವಿಧ","englishTitle":"Miscellaneous Features/Brands","href":"/others/miscellaneous-featuresbrands"}],"tagline":"Specials, Multimedia, Miscellaneous Features/Brands","showInMobileBar":false}
    ]
    </script>

<script>
    // --- Global DOM References ---
    const hamburgerBtn = document.getElementById('hamburgerBtn');
    const overlayMenu = document.getElementById('overlayMenu');
    const closeMenuBtn = document.getElementById('closeMenuBtn');
    const desktopNavContainer = document.getElementById('desktopNav');
    const desktopNavUl = document.getElementById('desktopNavUl');
    const mobileNavUl = document.getElementById('mobileNavUl');
    const overlayNavUl = document.getElementById('overlayNavUl');
    const fullWidthL2ContentHolder = document.getElementById('fullWidthL2ContentHolder');
    const overlaySearchIconBtn = document.querySelector('.overlay-menu-top-bar .overlay-search-icon');
    const overlaySearchInput = document.getElementById('overlaySearchInput');
    const overlaySearchArea = document.querySelector('.overlay-menu-search-input-area');

    // Featured Bar DOM References
    const desktopFeaturedBar = document.getElementById('desktopFeaturedBar');
    const desktopFeaturedUl = document.getElementById('desktopFeaturedUl');
    // const desktopFeaturedLabel = document.getElementById('desktopFeaturedLabel'); // Removed as using icon only for label
    const mobileOverlayFeaturedBar = document.getElementById('mobileOverlayFeaturedBar');
    const mobileOverlayFeaturedUl = document.getElementById('mobileOverlayFeaturedUl');
    // const mobileOverlayFeaturedLabel = document.getElementById('mobileOverlayFeaturedLabel'); // Removed as using icon only for label

    let menuData = [];
    let currentMenuLanguage = 'kn';
    let currentlyOpenL1Toggle = null;
    let currentlyOpenL1ItemId = null;
    let isLoggedIn = false; // Track login state

    const uiStrings = {
        // logoText was removed as logo is now an SVG image
        searchPlaceholder: {
            kn: "ಪ್ರಜಾವಾಣಿಯಲ್ಲಿ ಹುಡುಕಿ...",
            en: "Search Prajavani..."
        },
        loginButton: {
            kn: "ಲಾಗಿನ್",
            en: "Login"
        },
        myAccountButton: {
            kn: "ನನ್ನ ಖಾತೆ",
            en: "My Account"
        },
        epaperButton: {
            kn: "ಇ-ಪೇಪರ್",
            en: "ePaper"
        },
        bottomNavigation: {
            home: {
                kn: "ಮುಖ್ಯ",
                en: "Home"
            },
            podcasts: {
                kn: "ಪಾಡ್‌ಕಾಸ್ಟ್",
                en: "Podcasts"
            },
            epaper: {
                kn: "ಇ-ಪೇಪರ್",
                en: "ePaper"
            },
            menu: {
                kn: "ಮೆನು",
                en: "Menu"
            }
        },
        followUs: {
            kn: "ನಮ್ಮನ್ನು ಅನುಸರಿಸಿ",
            en: "Follow Us"
        }
        // featuredLabel was removed as the label is now a static icon in HTML
    };

    const featuredItemsData = [
        { title: "Festivals in Karnataka", href: "/specials/karnataka-festivals", kannadaTitle: "ಕರ್ನಾಟಕದ ಹಬ್ಬಗಳು" },
        { title: "Operation Sindoor", href: "/investigations/operation-sindoor", kannadaTitle: "ಆಪರೇಷನ್ ಸಿಂಧೂರ" },
        { title: "Prajavani Premium", href: "/premium", kannadaTitle: "ಪ್ರಜಾವಾಣಿ ಪ್ರೀಮಿಯಂ" },
        { title: "Horoscope", href: "/horoscope", kannadaTitle: "ಭವಿಷ್ಯ ವಾಣಿ" }
    ];

    // --- Helper Functions ---
    function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
            const later = () => { clearTimeout(timeout); func(...args); };
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }
    function getMenuItemTitle(item) { return currentMenuLanguage === 'kn' ? item.kannadaTitle : item.englishTitle; }
    function getSubItemTitle(subItem) { return currentMenuLanguage === 'kn' ? subItem.kannadaTitle : subItem.englishTitle; }
    function getMenuItemTagline(item) {
        if (item.tagline && currentMenuLanguage === 'en') return item.tagline;
        const subItemsForTag = item.subItems || [];
        const defaultTitle = currentMenuLanguage === 'kn' ? item.kannadaTitle : item.englishTitle;
        if (subItemsForTag.length === 0) return defaultTitle;
        const subTitles = subItemsForTag.slice(0, 2).map(si => currentMenuLanguage === 'kn' ? si.kannadaTitle : si.englishTitle);
        let tagline = subTitles.join(', ');
        if (subItemsForTag.length > 2) tagline += (currentMenuLanguage === 'kn' ? " ಮತ್ತು ಇನ್ನಷ್ಟು" : " & more");
        return tagline;
    }

    function getFeaturedItemTitle(item) { // This provides text for the featured item links (the chips)
        return currentMenuLanguage === 'kn' ? item.kannadaTitle : item.title;
    }

    // --- Login State Management ---
    function toggleLoginState() {
        isLoggedIn = !isLoggedIn;
        
        // Update button URLs and visual state
        const loginButtons = document.querySelectorAll('.login-button');
        loginButtons.forEach(button => {
            if (isLoggedIn) {
                button.href = '/account';
                button.setAttribute('aria-label', 'Access My Account');
                button.classList.add('logged-in-state');
            } else {
                button.href = '/login';
                button.setAttribute('aria-label', 'Login to Account');
                button.classList.remove('logged-in-state');
            }
        });
        
        updateStaticUIText(); // Refresh all UI text including login buttons
        console.log('Login state changed to:', isLoggedIn ? 'Logged In (My Account)' : 'Logged Out (Login)');
    }
    
    function initLoginButtons() {
        // Add click handlers to all login buttons
        const loginButtons = document.querySelectorAll('.login-button');
        loginButtons.forEach(button => {
            // Remove existing listener if any
            button.removeEventListener('click', handleLoginClick);
            // Add new listener
            button.addEventListener('click', handleLoginClick);
        });
    }
    
    function handleLoginClick(event) {
        event.preventDefault();
        toggleLoginState();
    }

    // --- Language Switching Function ---
    function switchLanguage(newLanguage) {
        if (newLanguage === 'kn' || newLanguage === 'en') {
            currentMenuLanguage = newLanguage;
            populateAllMenus(); // Repopulate all menus with new language
            updateStaticUIText(); // Update static text elements
            console.log('Language switched to:', newLanguage === 'kn' ? 'Kannada' : 'English');
        } else {
            console.error('Invalid language. Use "kn" for Kannada or "en" for English.');
        }
    }
    
    // Make switchLanguage and toggleLoginState globally accessible for testing
    window.switchLanguage = switchLanguage;
    window.toggleLoginState = toggleLoginState;

    function updateStaticUIText() {
        const overlayHeaderSearchInput = document.querySelector('.overlay-header-search-input');
        const mobileOverlaySearchInput = document.getElementById('overlaySearchInput');
        const mobileBottomNav = document.getElementById('mobileBottomNav');

        // Logo text updates were removed as logo is now an SVG
        if (overlayHeaderSearchInput) overlayHeaderSearchInput.placeholder = uiStrings.searchPlaceholder[currentMenuLanguage];
        if (mobileOverlaySearchInput) mobileOverlaySearchInput.placeholder = uiStrings.searchPlaceholder[currentMenuLanguage];
        
        // Update login and ePaper buttons in main header
        const mainLoginButtons = document.querySelectorAll('.login-button');
        const mainEpaperButtons = document.querySelectorAll('.epaper-main-header-button .epaper-text');
        
        const loginText = isLoggedIn ? uiStrings.myAccountButton[currentMenuLanguage] : uiStrings.loginButton[currentMenuLanguage];
        
        mainLoginButtons.forEach(button => {
            button.textContent = loginText;
        });
        
        mainEpaperButtons.forEach(span => {
            span.textContent = uiStrings.epaperButton[currentMenuLanguage];
        });
        
        // Update bottom navigation text
        if (mobileBottomNav) {
            const homeSpan = mobileBottomNav.querySelector('a[href="/"] span');
            const podcastsSpan = mobileBottomNav.querySelector('a[href="/op-ed/podcast"] span');
            const epaperSpan = mobileBottomNav.querySelector('a[href="/epaper"] span');
            const menuSpan = mobileBottomNav.querySelector('button span');
            
            if (homeSpan) homeSpan.textContent = uiStrings.bottomNavigation.home[currentMenuLanguage];
            if (podcastsSpan) podcastsSpan.textContent = uiStrings.bottomNavigation.podcasts[currentMenuLanguage];
            if (epaperSpan) epaperSpan.textContent = uiStrings.bottomNavigation.epaper[currentMenuLanguage];
            if (menuSpan) menuSpan.textContent = uiStrings.bottomNavigation.menu[currentMenuLanguage];
        }
        
        // Update follow us text in overlay menu
        const followTitle = document.querySelector('.follow-title');
        if (followTitle) {
            followTitle.textContent = uiStrings.followUs[currentMenuLanguage];
        }
        
        // Apply Kannada font size adjustments
        applyKannadaFontSizes();
    }
    
    // --- Kannada Font Size Management ---
    function applyKannadaFontSizes() {
        // Remove existing Kannada classes
        document.querySelectorAll('.kannada-text').forEach(el => {
            el.classList.remove('kannada-text', 'small-text', 'large-text');
        });
        
        // Apply Kannada classes if current language is Kannada
        if (currentMenuLanguage === 'kn') {
            // Desktop navigation links
            document.querySelectorAll('#desktopNavUl a').forEach(link => {
                link.classList.add('kannada-text');
            });
            
            // Mobile navigation links  
            document.querySelectorAll('#mobileNavUl a').forEach(link => {
                link.classList.add('kannada-text', 'small-text');
            });
            
            // Mobile bottom navigation
            document.querySelectorAll('.mobile-nav-item span').forEach(span => {
                span.classList.add('kannada-text', 'small-text');
            });
            
            // Featured bar chips
            document.querySelectorAll('.featured-bar a').forEach(chip => {
                chip.classList.add('kannada-text');
            });
            
            // Overlay menu titles
            document.querySelectorAll('.menu-item-title').forEach(title => {
                title.classList.add('kannada-text');
            });
            
            // Overlay menu taglines  
            document.querySelectorAll('.menu-item-tagline').forEach(tagline => {
                tagline.classList.add('kannada-text', 'small-text');
            });
            
            // L2 submenu links
            document.querySelectorAll('.l2-column a').forEach(link => {
                link.classList.add('kannada-text');
            });
            
            // Mega menu links
            document.querySelectorAll('.mega-menu-panel a').forEach(link => {
                link.classList.add('kannada-text');
            });
            
            // Footer elements
            document.querySelectorAll('.utility-links a, .app-link, .copyright').forEach(el => {
                el.classList.add('kannada-text');
            });
            
            // Follow us title in overlay menu
            document.querySelectorAll('.follow-title').forEach(title => {
                title.classList.add('kannada-text');
            });
            
            // Login and ePaper buttons
            document.querySelectorAll('.login-button, .epaper-main-header-button .epaper-text').forEach(button => {
                button.classList.add('kannada-text');
            });
        }
    }

    // --- Featured Bar Population ---
    function populateFeaturedBars() {
        // Populate Desktop Bar
        if (desktopFeaturedUl) { // Condition only relies on the UL element existing
            desktopFeaturedUl.innerHTML = ''; // Clear existing items
            // The icon label is static in HTML, no JS update needed for it
            featuredItemsData.forEach(item => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.href = item.href;
                a.textContent = getFeaturedItemTitle(item); // Set text for the link (chip)
                // Highlight Premium item with red background
                if (item.title.includes('Premium') || item.kannadaTitle.includes('ಪ್ರೀಮಿಯಂ')) {
                    a.classList.add('featured-highlight');
                }
                // For accessibility, if the link itself doesn't have descriptive text (e.g., if it were an icon too)
                // you would set aria-label: a.setAttribute('aria-label', getFeaturedItemTitle(item));
                li.appendChild(a);
                desktopFeaturedUl.appendChild(li);
            });
        } else {
            console.warn("desktopFeaturedUl not found. Cannot populate desktop featured bar.");
        }

        // Populate Mobile Overlay Bar
        if (mobileOverlayFeaturedUl) { // Condition only relies on the UL element existing
            mobileOverlayFeaturedUl.innerHTML = ''; // Clear existing items
            // The icon label is static in HTML, no JS update needed for it
            featuredItemsData.forEach(item => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                a.textContent = getFeaturedItemTitle(item); // Set text for the link (chip)
                a.href = item.href;
                // Highlight Premium item with red background
                if (item.title.includes('Premium') || item.kannadaTitle.includes('ಪ್ರೀಮಿಯಂ')) {
                    a.classList.add('featured-highlight');
                }
                li.appendChild(a);
                mobileOverlayFeaturedUl.appendChild(li);
            });
        } else {
            console.warn("mobileOverlayFeaturedUl not found. Cannot populate mobile overlay featured bar.");
        }
    }

    // --- Desktop Nav Population & Interactions ---
    function populateDesktopNav() {
        if (!desktopNavContainer || !desktopNavUl) return;
        desktopNavUl.innerHTML = '';
        const containerWidth = desktopNavContainer.clientWidth;
        if (containerWidth === 0 && window.innerWidth >= 768) { /* console.warn relevant warning */ }

        const MAX_DESKTOP_SUBMENU_HEIGHT_PERCENTAGE = 0.75;
        const viewportHeight = window.innerHeight;
        const approxHeaderHeight = desktopNavUl.closest('.site-header')?.offsetHeight || 60;
        const availableHeightForDesktopSubmenu = Math.min(
            viewportHeight * MAX_DESKTOP_SUBMENU_HEIGHT_PERCENTAGE,
            viewportHeight - approxHeaderHeight - 20
        );
        const approxDesktopItemHeight = 35;

        for (const item of menuData) {
            const li = document.createElement('li');
            li.classList.add('has-submenu');
            // Add default highlighting for news
            if (item.id === 'news') {
                li.classList.add('default-highlighted');
            }
            const a = document.createElement('a');
            a.href = item.href; 
            a.textContent = getMenuItemTitle(item);
            a.setAttribute('aria-haspopup', 'true'); 
            a.setAttribute('aria-expanded', 'false');
            a.dataset.itemId = item.id; // Add item ID for tracking
            li.appendChild(a);

            if (item.subItems && item.subItems.length > 0) {
                const megaMenuPanel = document.createElement('div');
                megaMenuPanel.classList.add('mega-menu-panel');
                let currentColumnUl = document.createElement('ul');
                currentColumnUl.classList.add('sub-menu-column');
                megaMenuPanel.appendChild(currentColumnUl);
                let currentColumnHeight = 0;
                item.subItems.forEach((subItem) => {
                    if (currentColumnHeight + approxDesktopItemHeight > availableHeightForDesktopSubmenu && currentColumnUl.children.length > 0) {
                        currentColumnUl = document.createElement('ul');
                        currentColumnUl.classList.add('sub-menu-column');
                        megaMenuPanel.appendChild(currentColumnUl);
                        currentColumnHeight = 0;
                    }
                    const subLi = document.createElement('li');
                    const subA_L2 = document.createElement('a');
                    // Navigate to L2 placeholder with section parameter
                    const sectionParam = subItem.href.split('/').pop();
                    subA_L2.href = `l2-placeholder.html.html?section=${sectionParam}`;
                    subA_L2.textContent = getSubItemTitle(subItem);
                    subLi.appendChild(subA_L2); currentColumnUl.appendChild(subLi);
                    currentColumnHeight += approxDesktopItemHeight;
                });
                li.appendChild(megaMenuPanel);
            }
            desktopNavUl.appendChild(li);
            if (desktopNavUl.scrollWidth > containerWidth && containerWidth > 0) {
                if (desktopNavUl.contains(li)) { desktopNavUl.removeChild(li); }
                break;
            }
        }
    }
    function initDesktopNavInteractions() {
        const desktopNavLis = document.querySelectorAll('#desktopNavUl > li.has-submenu');
        let closeTimeout = null;
        let currentOpenLi = null;

        // Close all open menus
        function closeAllMenus() {
            desktopNavLis.forEach(li => {
                li.classList.remove('submenu-visible');
                const link = li.querySelector('a');
                if (link) {
                    link.setAttribute('aria-expanded', 'false');
                }
            });
            currentOpenLi = null;
        }

        // Handle hover and click events on menu items
        desktopNavLis.forEach(li => {
            const link = li.querySelector('a');
            const panel = li.querySelector('.mega-menu-panel');
            if (!link || !panel) return;

            // Mouse enter - open submenu immediately
            li.addEventListener('mouseenter', () => {
                // Clear any pending close timeout
                if (closeTimeout) {
                    clearTimeout(closeTimeout);
                    closeTimeout = null;
                }

                // Check if this item has submenus
                const hasSubmenus = panel && panel.children.length > 0;

                if (hasSubmenus) {
                    // Close all other menus
                    closeAllMenus();

                    // Open this menu
                    li.classList.add('submenu-visible');
                    link.setAttribute('aria-expanded', 'true');
                    currentOpenLi = li;
                }
            });

            // Mouse leave - close submenu after 200ms delay
            li.addEventListener('mouseleave', () => {
                // Set timeout to close after 200ms
                closeTimeout = setTimeout(() => {
                    // Close this menu
                    li.classList.remove('submenu-visible');
                    link.setAttribute('aria-expanded', 'false');
                    if (currentOpenLi === li) {
                        currentOpenLi = null;
                    }
                }, 200);
            });

            // Click - navigate to L1 page
            link.addEventListener('click', (event) => {
                event.preventDefault();

                const itemId = link.dataset.itemId;

                // Navigate to L1 page
                window.location.href = `l1-placeholder.html.html?section=${itemId}`;
            });
        });

        // Close menus when clicking outside
        document.addEventListener('click', (event) => {
            if (!desktopNavContainer.contains(event.target)) {
                closeAllMenus();
            }
        });

        // Close menus on ESC key
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                closeAllMenus();
            }
        });
    }

    // --- Mobile Nav Population ---
    function populateMobileNav() {
        if (!mobileNavUl) return;
        mobileNavUl.innerHTML = '';
        menuData.filter(item => item.showInMobileBar).forEach(item => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = item.href;
            a.textContent = getMenuItemTitle(item);
            a.dataset.itemId = item.id; // Add item ID for tracking
            // Add default highlighting for news (replace active with default-highlighted)
            if (item.id === 'news') {
                a.classList.add('default-highlighted');
            }
            li.appendChild(a);
            mobileNavUl.appendChild(li);
        });
    }

    // --- Overlay Menu Population & Interactions ---
    function populateOverlayMenu() {
        if (!overlayNavUl) return;
        overlayNavUl.innerHTML = '';
        menuData.forEach(item => {
            const li = document.createElement('li');

            // Create wrapper div
            const wrapper = document.createElement('div');
            wrapper.classList.add('menu-item-wrapper');

            // Create main link (for navigation)
            const mainLink = document.createElement('a');
            mainLink.classList.add('menu-item-link');
            mainLink.href = `l1-placeholder.html.html?section=${item.id}`;
            mainLink.dataset.itemId = item.id;

            const titleSpan = document.createElement('span');
            titleSpan.classList.add('menu-item-title');
            titleSpan.textContent = getMenuItemTitle(item);
            mainLink.appendChild(titleSpan);

            const taglineSpan = document.createElement('span');
            taglineSpan.classList.add('menu-item-tagline');
            taglineSpan.textContent = getMenuItemTagline(item);
            mainLink.appendChild(taglineSpan);

            wrapper.appendChild(mainLink);

            // Create expand button (only if has subitems)
            if (item.subItems && item.subItems.length > 0) {
                li.classList.add('has-submenu');
                const expandBtn = document.createElement('button');
                expandBtn.classList.add('expand-button');
                expandBtn.dataset.itemId = item.id;
                expandBtn.setAttribute('aria-label', `Expand ${getMenuItemTitle(item)} submenu`);
                expandBtn.setAttribute('aria-expanded', 'false');

                const icon = document.createElement('i');
                icon.classList.add('fas', 'fa-chevron-down', 'expand-icon');
                expandBtn.appendChild(icon);

                wrapper.appendChild(expandBtn);
            }

            li.appendChild(wrapper);
            overlayNavUl.appendChild(li);
        });
        if (fullWidthL2ContentHolder && fullWidthL2ContentHolder.parentNode !== overlayMenu.querySelector('.overlay-menu-body')) {
             overlayMenu.querySelector('.overlay-menu-body').appendChild(fullWidthL2ContentHolder);
        }
        if(fullWidthL2ContentHolder) {
            fullWidthL2ContentHolder.classList.remove('is-open');
            fullWidthL2ContentHolder.style.maxHeight = null;
            fullWidthL2ContentHolder.innerHTML = '';
        }
        initOverlayMenuInteractions();
    }

    function renderL2Content(l1ItemId, clickedL1LiElement) {
        if (!fullWidthL2ContentHolder || !overlayNavUl) return;

        fullWidthL2ContentHolder.innerHTML = '';
        if (fullWidthL2ContentHolder.parentNode) {
            fullWidthL2ContentHolder.parentNode.removeChild(fullWidthL2ContentHolder);
        }
        fullWidthL2ContentHolder.classList.remove('is-open');
        fullWidthL2ContentHolder.style.maxHeight = null;
        fullWidthL2ContentHolder.style.paddingTop = '0';
        fullWidthL2ContentHolder.style.paddingBottom = '0';
        fullWidthL2ContentHolder.style.marginTop = '0';

        const l1ItemData = menuData.find(item => item.id === l1ItemId);
        if (!l1ItemData || !l1ItemData.subItems || l1ItemData.subItems.length === 0) {
            return;
        }

        const l2Wrapper = document.createElement('div');
        l2Wrapper.classList.add('l2-columns-wrapper');
        const itemsPerColumn = Math.ceil(l1ItemData.subItems.length / 3);
        let currentColumnUl;

        l1ItemData.subItems.forEach((subItem, index) => {
            if (index % itemsPerColumn === 0) {
                currentColumnUl = document.createElement('ul');
                currentColumnUl.classList.add('l2-column');
                l2Wrapper.appendChild(currentColumnUl);
            }
            const subLi = document.createElement('li');
            const subA = document.createElement('a');
            // Navigate to L2 placeholder with section parameter
            const sectionParam = subItem.href.split('/').pop();
            subA.href = `l2-placeholder.html.html?section=${sectionParam}`;
            subA.textContent = getSubItemTitle(subItem);
            subLi.appendChild(subA); currentColumnUl.appendChild(subLi);
        });
        fullWidthL2ContentHolder.appendChild(l2Wrapper);

        const l1Items = Array.from(overlayNavUl.children);
        let endOfRowLi = null;
        if (clickedL1LiElement) {
            const topOffsetOfClickedRow = clickedL1LiElement.offsetTop;
            for (let i = 0; i < l1Items.length; i++) {
                if (l1Items[i].offsetTop === topOffsetOfClickedRow) {
                    endOfRowLi = l1Items[i];
                }
                if (l1Items[i].offsetTop > topOffsetOfClickedRow && endOfRowLi) break;
            }
        }
        if (!endOfRowLi && l1Items.length > 0) endOfRowLi = l1Items[l1Items.length - 1];

        if (endOfRowLi && endOfRowLi.parentNode === overlayNavUl) {
            overlayNavUl.insertBefore(fullWidthL2ContentHolder, endOfRowLi.nextSibling);
        } else {
            overlayNavUl.appendChild(fullWidthL2ContentHolder);
        }

        void fullWidthL2ContentHolder.offsetWidth;
        setTimeout(() => {
            fullWidthL2ContentHolder.classList.add('is-open');
            fullWidthL2ContentHolder.style.paddingTop = '';
            fullWidthL2ContentHolder.style.paddingBottom = '';
            fullWidthL2ContentHolder.style.marginTop = '0.2rem';
            fullWidthL2ContentHolder.style.maxHeight = fullWidthL2ContentHolder.scrollHeight + "px";
        }, 10);
    }

    function initOverlayMenuInteractions() {
        // Handle expand button clicks
        const expandButtons = document.querySelectorAll('#overlayNavUl .expand-button');

        expandButtons.forEach(button => {
            const newButton = button.cloneNode(true);
            if (button.parentNode) button.parentNode.replaceChild(newButton, button);
            else return;

            newButton.addEventListener('click', function(event) {
                event.preventDefault();
                event.stopPropagation();

                const clickedL1LiElement = this.closest('li');
                const wrapper = this.closest('.menu-item-wrapper');
                const l1ItemId = this.dataset.itemId;
                const l1ItemData = menuData.find(item => item.id === l1ItemId);
                const isCurrentlyActive = this.classList.contains('expanded');

                // Close previous menu if different
                if (currentlyOpenL1Toggle && currentlyOpenL1Toggle !== this) {
                    currentlyOpenL1Toggle.classList.remove('expanded');
                    currentlyOpenL1Toggle.setAttribute('aria-expanded', 'false');
                    const prevWrapper = currentlyOpenL1Toggle.closest('.menu-item-wrapper');
                    if (prevWrapper) prevWrapper.classList.remove('active');
                    const prevIcon = currentlyOpenL1Toggle.querySelector('.expand-icon');
                    if (prevIcon) prevIcon.style.transform = 'rotate(0deg)';
                }

                // Close L2 content if different menu or closing current
                if (currentlyOpenL1ItemId !== l1ItemId || isCurrentlyActive) {
                    fullWidthL2ContentHolder.classList.remove('is-open');
                    fullWidthL2ContentHolder.style.maxHeight = null;
                }

                // Toggle current menu
                if (!isCurrentlyActive) {
                    renderL2Content(l1ItemId, clickedL1LiElement);
                    this.classList.add('expanded');
                    this.setAttribute('aria-expanded', 'true');
                    if (wrapper) wrapper.classList.add('active');
                    const icon = this.querySelector('.expand-icon');
                    if (icon) icon.style.transform = 'rotate(180deg)';
                    currentlyOpenL1Toggle = this;
                    currentlyOpenL1ItemId = l1ItemId;
                } else {
                    this.classList.remove('expanded');
                    this.setAttribute('aria-expanded', 'false');
                    if (wrapper) wrapper.classList.remove('active');
                    const icon = this.querySelector('.expand-icon');
                    if (icon) icon.style.transform = 'rotate(0deg)';
                    currentlyOpenL1Toggle = null;
                    currentlyOpenL1ItemId = null;
                }
            });
        });

        // Main menu links will use default navigation (no additional handler needed)
        // They already have href set to l1-placeholder.html.html?section=${item.id}
    }

    function initOverlayTopBarActions() {
        if (overlaySearchIconBtn && overlaySearchArea) {
            overlaySearchIconBtn.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    overlaySearchArea.classList.toggle('is-visible');
                    if (overlaySearchArea.classList.contains('is-visible')) {
                        overlaySearchInput.focus();
                    }
                } else {
                    const headerSearchInput = document.querySelector('.overlay-header-search-input');
                    if (headerSearchInput) {
                        headerSearchInput.focus();
                    }
                }
            });
        }
    }

    // --- Menu Opening/Closing & Initialization ---
    function openMenu() {
        overlayMenu.classList.add('is-open');
        overlayMenu.setAttribute('aria-hidden', 'false');
        hamburgerBtn.setAttribute('aria-expanded', 'true');
        document.body.style.overflow = 'hidden';
        if (window.innerWidth >= 768 && overlaySearchInput) overlaySearchInput.focus();
    }
    function closeMenu() {
        overlayMenu.classList.remove('is-open');
        overlayMenu.setAttribute('aria-hidden', 'true');
        hamburgerBtn.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
        if (overlaySearchArea) {
            overlaySearchArea.classList.remove('is-visible');
        }
        if (fullWidthL2ContentHolder) {
            fullWidthL2ContentHolder.classList.remove('is-open');
            fullWidthL2ContentHolder.style.maxHeight = null;
            const overlayBody = overlayMenu.querySelector('.overlay-menu-body');
            if (overlayBody && fullWidthL2ContentHolder.parentNode && fullWidthL2ContentHolder.parentNode !== overlayBody) {
                 fullWidthL2ContentHolder.parentNode.removeChild(fullWidthL2ContentHolder);
                 overlayBody.appendChild(fullWidthL2ContentHolder);
            }
        }
        if (currentlyOpenL1Toggle) {
            currentlyOpenL1Toggle.classList.remove('active-l1');
            currentlyOpenL1Toggle.setAttribute('aria-expanded', 'false');
            const icon = currentlyOpenL1Toggle.querySelector('.expand-icon');
            if (icon) icon.style.transform = 'rotate(0deg)';
        }
        currentlyOpenL1Toggle = null;
        currentlyOpenL1ItemId = null;
    }
    hamburgerBtn.addEventListener('click', openMenu);
    closeMenuBtn.addEventListener('click', closeMenu);
    
    // Mobile Bottom Nav Menu Button
    const mobileBottomMenuBtn = document.getElementById('mobileBottomMenuBtn');
    if (mobileBottomMenuBtn) {
        mobileBottomMenuBtn.addEventListener('click', openMenu);
    }
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && overlayMenu.classList.contains('is-open')) {
            closeMenu();
        }
    });

    function populateAllMenus() {
        populateDesktopNav();
        populateMobileNav();
        populateOverlayMenu();
        populateFeaturedBars(); // Populate featured bars
        
        // Apply Kannada font sizes after menus are populated
        setTimeout(() => {
            applyKannadaFontSizes();
            initLoginButtons(); // Reinitialize login buttons after menu updates
        }, 10);
    }
    function initializeMenus() {
        try {
            const menuDataSource = document.getElementById('menuDataSource');
            if (!menuDataSource) { console.error("Menu data source script tag not found."); return; }
            menuData = JSON.parse(menuDataSource.textContent);

            populateAllMenus(); 
            updateStaticUIText(); // This now includes applyKannadaFontSizes()
            initDesktopNavInteractions();
            initOverlayTopBarActions();
            initLoginButtons(); // Initialize login button functionality

            const debouncedDesktopNavUpdate = debounce(() => {
                populateDesktopNav();
                initDesktopNavInteractions();
            }, 250);
            window.addEventListener('resize', debouncedDesktopNavUpdate);
        } catch (error) {
            console.error("Could not load or parse menu data:", error);
        }
    }

    document.addEventListener('DOMContentLoaded', initializeMenus);
    
    // Initialize mobile bottom nav and ad on page load
    document.addEventListener('DOMContentLoaded', () => {
        if (window.innerWidth <= 767.98) {
            const mobileBottomNav = document.getElementById('mobileBottomNav');
            const mobileBottomAd = document.getElementById('mobileBottomAd');
            if (mobileBottomNav) {
                mobileBottomNav.classList.add('hide-on-scroll');
            }
            if (mobileBottomAd) {
                mobileBottomAd.classList.add('hide-on-scroll');
                mobileBottomAd.classList.add('nav-hidden');
            }
        }
    });
    
    // --- Mobile Scroll Direction Handler ---
    let lastScrollY = 0;
    let scrollTimeout = null;
    
    function handleMobileScrollDirection() {
        if (window.innerWidth > 767.98) return; // Only on mobile
        
        const currentScrollY = window.scrollY;
        const mobileMenuBar = document.getElementById('mobileMenuBar');
        const mobileBottomNav = document.getElementById('mobileBottomNav');
        const mobileBottomAd = document.getElementById('mobileBottomAd');
        const siteHeader = document.querySelector('.site-header');
        
        if (!mobileMenuBar || !mobileBottomNav || !mobileBottomAd || !siteHeader) return;
        
        // Clear any existing timeout
        if (scrollTimeout) {
            clearTimeout(scrollTimeout);
        }
        
        // Get header height to determine when it's off screen
        const headerHeight = siteHeader.offsetHeight;
        const headerOffScreen = currentScrollY > headerHeight;
        
        // Determine scroll direction
        const scrollingDown = currentScrollY > lastScrollY && currentScrollY > 100; // Only hide after scrolling 100px
        const scrollingUp = currentScrollY < lastScrollY;
        
        // Handle mobile menu bar (can show/hide regardless of header position)
        if (scrollingDown) {
            mobileMenuBar.classList.add('hide-on-scroll');
        } else if (scrollingUp) {
            mobileMenuBar.classList.remove('hide-on-scroll');
        }
        
        // Handle bottom nav and ad (only show after header is off screen)
        if (!headerOffScreen) {
            // Header still visible - always hide both bottom nav and ad
            mobileBottomNav.classList.add('hide-on-scroll');
            mobileBottomAd.classList.add('hide-on-scroll');
        } else {
            // Header off screen - ad is always visible, bottom nav follows scroll direction
            mobileBottomAd.classList.remove('hide-on-scroll'); // Ad always visible after header hidden
            
            // Bottom nav follows scroll direction logic
            if (scrollingDown) {
                mobileBottomNav.classList.add('hide-on-scroll');
            } else if (scrollingUp) {
                mobileBottomNav.classList.remove('hide-on-scroll');
            }
        }
        
        // Handle ad positioning based on bottom nav visibility
        const isBottomNavHidden = mobileBottomNav.classList.contains('hide-on-scroll');
        if (isBottomNavHidden) {
            mobileBottomAd.classList.add('nav-hidden');
        } else {
            mobileBottomAd.classList.remove('nav-hidden');
        }
        
        // Update last scroll position after a small delay to reduce jitter
        scrollTimeout = setTimeout(() => {
            lastScrollY = currentScrollY;
        }, 10);
    }
    
    // --- Desktop Scroll Direction Handler ---
    function handleDesktopScrollDirection() {
        if (window.innerWidth <= 991.98) return; // Only on desktop
        
        const currentScrollY = window.scrollY;
        const desktopFeaturedBar = document.getElementById('desktopFeaturedBar');
        
        if (!desktopFeaturedBar) return;
        
        // Determine scroll direction
        const scrollingDown = currentScrollY > lastScrollY && currentScrollY > 100; // Only hide after scrolling 100px
        const scrollingUp = currentScrollY < lastScrollY;
        
        // Handle desktop featured bar
        if (scrollingDown) {
            desktopFeaturedBar.classList.add('hide-on-scroll');
        } else if (scrollingUp) {
            desktopFeaturedBar.classList.remove('hide-on-scroll');
        }
        
        // Update last scroll position after a small delay to reduce jitter
        scrollTimeout = setTimeout(() => {
            lastScrollY = currentScrollY;
        }, 10);
    }
    
    // Add scroll event listener with throttling
    let scrollThrottle = null;
    window.addEventListener('scroll', () => {
        if (scrollThrottle) return;
        scrollThrottle = setTimeout(() => {
            handleMobileScrollDirection();
            handleDesktopScrollDirection();
            scrollThrottle = null;
        }, 16); // ~60fps
    });
    
    // Reset on resize to ensure proper behavior
    window.addEventListener('resize', debounce(() => {
        const mobileMenuBar = document.getElementById('mobileMenuBar');
        const mobileBottomNav = document.getElementById('mobileBottomNav');
        const mobileBottomAd = document.getElementById('mobileBottomAd');
        const desktopFeaturedBar = document.getElementById('desktopFeaturedBar');
        
        if (window.innerWidth > 767.98) {
            // Remove mobile classes on desktop/tablet
            if (mobileMenuBar) mobileMenuBar.classList.remove('hide-on-scroll');
            if (mobileBottomNav) mobileBottomNav.classList.remove('hide-on-scroll');
            if (mobileBottomAd) {
                mobileBottomAd.classList.remove('nav-hidden');
                mobileBottomAd.classList.remove('hide-on-scroll');
            }
        }
        
        if (window.innerWidth <= 991.98) {
            // Remove desktop classes on mobile/tablet
            if (desktopFeaturedBar) desktopFeaturedBar.classList.remove('hide-on-scroll');
        }
    }, 250));
</script>
</body>
</html>